<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Tech on 江 Blog</title>
    <link>https://bopjiang.github.io/categories/tech/</link>
    <description>Recent content in Tech on 江 Blog</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 10 Jun 2021 12:16:07 +0800</lastBuildDate>
    <atom:link href="https://bopjiang.github.io/categories/tech/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>手动安装Linux网卡驱动</title>
      <link>https://bopjiang.github.io/post/2021/06/10/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85linux%E7%BD%91%E5%8D%A1%E9%A9%B1%E5%8A%A8/</link>
      <pubDate>Thu, 10 Jun 2021 12:16:07 +0800</pubDate>
      <guid>https://bopjiang.github.io/post/2021/06/10/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85linux%E7%BD%91%E5%8D%A1%E9%A9%B1%E5%8A%A8/</guid>
      <description>&lt;p&gt;今天偶然间发现一台Linux机器的网卡峰值速度只有100Mbps了, 奇怪.&lt;/p&gt;&#xA;&lt;p&gt;虽说是台旧电脑(Thinkpad X61s), 但明明规格是1000Mbps啊.&lt;/p&gt;&#xA;&lt;p&gt;查询了下interface信息, 网卡类型&lt;code&gt;Intel(R) PRO/1000&lt;/code&gt;,&lt;code&gt;eth0: NIC Link is Up 100 Mbps Full Duplex&lt;/code&gt;, 果然是100Mbps.&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo dmesg | grep -i duplex&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;   15.928542&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; e1000e 0000:00:19.0 eth0: NIC Link is Up &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt; Mbps Full Duplex, Flow Control: Rx/Tx&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;dev2&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;➜  ~ sudo dmesg | grep -i eth&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;    3.568102&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; e1000e 0000:00:19.0 eth0: &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;PCI Express:2.5GT/s:Width x1&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; 00:16:d3:3e:0d:74&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;    3.568105&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; e1000e 0000:00:19.0 eth0: Intel&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;R&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; PRO/1000 Network Connection&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;    3.568144&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; e1000e 0000:00:19.0 eth0: MAC: 6, PHY: 6, PBA No: FFFFFF-0FF&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;    7.716045&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; Bluetooth: BNEP &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;Ethernet Emulation&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; ver 1.3&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;   15.928542&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; e1000e 0000:00:19.0 eth0: NIC Link is Up &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt; Mbps Full Duplex, Flow Control: Rx/Tx&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;   15.928653&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; e1000e 0000:00:19.0 eth0: Link Speed was downgraded by SmartSpeed&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;   15.928656&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; e1000e 0000:00:19.0 eth0: 10/100 speed: disabling TSO&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;怎么回事?想想做过什么操作吗?&lt;/p&gt;</description>
    </item>
    <item>
      <title>Go Cheat Sheet</title>
      <link>https://bopjiang.github.io/note/go-cheat-sheet/</link>
      <pubDate>Tue, 01 Jun 2021 09:59:35 +0800</pubDate>
      <guid>https://bopjiang.github.io/note/go-cheat-sheet/</guid>
      <description>&lt;h2 id=&#34;test&#34;&gt;Test&lt;/h2&gt;&#xA;&lt;p&gt;run &lt;code&gt;go test&lt;/code&gt; without  cache&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# clean test case.&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ go clean -testcache&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# with go flags&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ GOFLAGS&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;-count=1&amp;#34;&lt;/span&gt; go test -timeout 30s -tags test -run ^XXXX$ github.com/xxx/xx&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;generate go test binary&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ go test github.com/xxx/xx -run &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;^(TestAll)&lt;/span&gt;$&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; -c&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;build&#34;&gt;Build&lt;/h2&gt;&#xA;&lt;p&gt;build binary for Raspberry Pi&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# For Raspberry Pi 4 with 64bit Linux&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ CGO&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; GOOS&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;linux GOARCH&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;arm64 go get -u github.com/shadowsocks/go-shadowsocks2&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# For Raspberry Pi 4 with 32bit Linux&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ CGO&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; GOOS&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;linux GOARCH&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;arm GOARM&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;7&lt;/span&gt; go get -u github.com/shadowsocks/go-shadowsocks2&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# For Raspberry Pi 1 with 32bit Linux&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ CGO&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; GOOS&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;linux GOARCH&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;arm GOARM&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt; go -u github.com/shadowsocks/go-shadowsocks2&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;for x86, 64 bit linux&lt;/p&gt;</description>
    </item>
    <item>
      <title>Linux Cheat Sheet</title>
      <link>https://bopjiang.github.io/note/linux-cheat-sheet/</link>
      <pubDate>Sat, 01 May 2021 09:59:35 +0800</pubDate>
      <guid>https://bopjiang.github.io/note/linux-cheat-sheet/</guid>
      <description>&lt;h2 id=&#34;general&#34;&gt;General&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;zip/tar directory without compressing&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;zip -Z store -r  myfolder.zip myfolder&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;tar compress &amp;amp; decompress&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# compress&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;tar czvf archive.tar.gz xx-dir&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# decompress filename.tar.xx&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;tar xvf archive.tar.xz&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# GNU tar recognizes the format by itself!&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;bash&#34;&gt;Bash&lt;/h2&gt;&#xA;&lt;p&gt;Inside single quotes everything is preserved literally, without exception.&lt;/p&gt;&#xA;&lt;p&gt;format date time&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;$(&lt;/span&gt;date &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;+%Y%m%d_%H%M%S&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;extract value from file content, and use in shell script.&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;SQL_TEXT&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;$(&lt;/span&gt;IFS&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;; cat ~/dump/tbl1.sql&lt;span style=&#34;color:#66d9ef&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mysql -h 127.0.0.1 -e &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;SQL_TEXT&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;get the directory in which a Bash script is located&lt;/p&gt;</description>
    </item>
    <item>
      <title>TiDB Local Development Envrionment</title>
      <link>https://bopjiang.github.io/post/2020/08/16/tidb-local-development-envrionment/</link>
      <pubDate>Sun, 16 Aug 2020 12:16:07 +0800</pubDate>
      <guid>https://bopjiang.github.io/post/2020/08/16/tidb-local-development-envrionment/</guid>
      <description>&lt;h2 id=&#34;run-tidb-in-docker&#34;&gt;Run TiDB in Docker&lt;/h2&gt;&#xA;&lt;p&gt;使用的&lt;a href=&#34;https://github.com/bopjiang/tidb-docker-compose/tree/2020-hp-jiang&#34;&gt;tidb-docker-compose&lt;/a&gt;, fork自&lt;a href=&#34;https://github.com/pingcap/tidb-docker-compose&#34;&gt;pingcap/tidb-docker-compose&lt;/a&gt;仓库.&lt;/p&gt;&#xA;&lt;p&gt;去掉了TiSpark功能, 暂时用不上, 节省点内存.&lt;/p&gt;&#xA;&lt;p&gt;TiDB集群(有Prometheus + Grafana)跑起来, 2G内存不够, 至少要分配4G内存.&lt;/p&gt;&#xA;&lt;h2 id=&#34;development-locally&#34;&gt;Development locally.&lt;/h2&gt;&#xA;&lt;p&gt;在tidb代码目录的同级目录, 增加一个shell脚本, 用于替换容器中的二进制文件.&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# cat ../script/replace_tidb.sh&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#!/bin/bash&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;set -e&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker cp bin/tidb-server tidb-docker-compose_tidb_1:/tidb-server&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker restart tidb-docker-compose_tidb_1&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;echo &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;replace tidb success&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker exec -it tidb-docker-compose_tidb_1  /tidb-server -V&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;在tidb代码目录执行&lt;code&gt;../script/replace_tidb.sh&lt;/code&gt;就能替换版本, 也不用污染tidb的代码目录.&lt;/p&gt;&#xA;&lt;p&gt;关键不用重新build docker镜像和重新创建container, 速度很快.&lt;/p&gt;&#xA;&lt;h2 id=&#34;增加日志&#34;&gt;增加日志&lt;/h2&gt;&#xA;&lt;p&gt;增加一个事务启动时的日志打印, 需修改TiDB Server代码, repo在&lt;a href=&#34;https://github.com/bopjiang/tidb/tree/2020&#34;&gt;bopjiang/tidb&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;发现一个问题, tidb-docker-compose仓库中的tidb server配置文件config/tidb.toml貌似有问题, 集群启动后有报出如下错误:&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;tidb_1         | config file /tidb.toml contained unknown configuration options: &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;log.file.log-rotate, performance.retry-limit, plan-cache, plan-cache.enabled, &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;plan-cache.capacity, plan-cache.shards&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;调整日志级别好像也不管用, 日志打印不出. 最后用的&lt;code&gt;fmt.Printf&lt;/code&gt;.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Raspberry Pi Tips</title>
      <link>https://bopjiang.github.io/note/raspberry-pi-tips/</link>
      <pubDate>Sat, 13 Jun 2020 11:36:41 +0800</pubDate>
      <guid>https://bopjiang.github.io/note/raspberry-pi-tips/</guid>
      <description>&lt;h2 id=&#34;basic-config&#34;&gt;Basic Config&lt;/h2&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo raspi-config&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;static-ip-per-ssid-in-wireless-network&#34;&gt;static IP per SSID in wireless network&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-ini&#34; data-lang=&#34;ini&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# in /etc/wpa_supplicant/wpa_supplicant.conf&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ctrl_interface&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;DIR=/var/run/wpa_supplicant GROUP=netdev&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;update_config&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;1&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;country&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;CN&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;network&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        ssid=&amp;#34;WIFI-NAME&amp;#34;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        psk=&amp;#34;password&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;}&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-ini&#34; data-lang=&#34;ini&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# in /etc/dhcpcd.conf&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# set wifi static ip per ssid&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ssid WIFI-Name&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;static ip_address&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;10.2.32.50/24&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;static routers&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;10.2.32.1&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;static domain_name_servers&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;8.8.8.8&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;a href=&#34;https://www.raspberrypi.org/forums/viewtopic.php?f=29&amp;amp;t=199081&#34;&gt;https://www.raspberrypi.org/forums/viewtopic.php?f=29&amp;amp;t=199081&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;monitor&#34;&gt;Monitor&lt;/h2&gt;&#xA;&lt;h3 id=&#34;measure-cpu-temperature&#34;&gt;Measure CPU temperature&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ sudo vcgencmd measure_temp&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;temp&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;44.4&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;C&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# use `sensors` in Ubuntu given package `lm-sensors` installed.&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;monitor-others&#34;&gt;monitor others&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ sudo vcgencmd commands&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;commands&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;vcos, ap_output_control, ap_output_post_processing, vchi_test_init, vchi_test_exit, vctest_memmap, vctest_start, vctest_stop, vctest_set, vctest_get, pm_set_policy, pm_get_status, pm_show_stats, pm_start_logging, pm_stop_logging, version, commands, set_vll_dir, set_backlight, set_logging, get_lcd_info, arbiter, cache_flush, otp_dump, test_result, codec_enabled, get_camera, get_mem, measure_clock, measure_volts, enable_clock, scaling_kernel, scaling_sharpness, get_hvs_asserts, get_throttled, measure_temp, get_config, hdmi_ntsc_freqs, hdmi_adjust_clock, hdmi_status_show, hvs_update_fields, pwm_speedup, force_audio, hdmi_stream_channels, hdmi_channel_map, display_power, read_ring_osc, memtest, dispmanx_list, get_rsts, schmoo, render_bar, disk_notify, inuse_notify, sus_suspend, sus_status, sus_is_enabled, sus_stop_test_thread, egl_platform_switch, mem_validate, mem_oom, mem_reloc_stats, hdmi_cvt, hdmi_timings, readmr, pmicrd, pmicwr, bootloader_version, bootloader_config, file&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;contrl-led&#34;&gt;contrl LED&lt;/h3&gt;&#xA;&lt;p&gt;config in &lt;code&gt;/boot/config.txt&lt;/code&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>AES使用的正确姿势</title>
      <link>https://bopjiang.github.io/post/2020/06/13/aes%E4%BD%BF%E7%94%A8%E7%9A%84%E6%AD%A3%E7%A1%AE%E5%A7%BF%E5%8A%BF/</link>
      <pubDate>Sat, 13 Jun 2020 06:08:06 +0800</pubDate>
      <guid>https://bopjiang.github.io/post/2020/06/13/aes%E4%BD%BF%E7%94%A8%E7%9A%84%E6%AD%A3%E7%A1%AE%E5%A7%BF%E5%8A%BF/</guid>
      <description>&lt;p&gt;昨天碰到一个敏感信息需要存入数据库的问题, 其实关键三个问题:&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;怎么选择加密方式&lt;/li&gt;&#xA;&lt;li&gt;怎么保存&lt;a href=&#34;https://en.wikipedia.org/wiki/Initialization_vector&#34;&gt;IV&lt;/a&gt;(初始化向量)&lt;/li&gt;&#xA;&lt;li&gt;怎么保存秘钥&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;加密方式&#34;&gt;加密方式&lt;/h2&gt;&#xA;&lt;p&gt;加密我们选用是&lt;a href=&#34;https://en.wikipedia.org/wiki/Advanced_Encryption_Standard&#34;&gt;AES&lt;/a&gt;, 但加密模式(encryption mode)很多, 用的比较普遍的有:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;ECB&lt;/strong&gt; (Electronic codebook, 电子密码本): 简单, 加密只有密钥一个参数. 但是秘钥, 明文不变时, 产生的密文是一样的, 不能防止重放攻击&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;CBC&lt;/strong&gt; (密码分组链接，Cipher-block chaining): 配合随机的IV使用, 无重放问题. 加密复杂.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;一般存放敏感信息的场景, 是不适合使用ECB模式的.&lt;/p&gt;&#xA;&lt;h2 id=&#34;iv&#34;&gt;IV&lt;/h2&gt;&#xA;&lt;p&gt;但是使用CBC模式, 如果IV不随机, 甚至使用不变的IV, 也会有重放问题.&lt;/p&gt;&#xA;&lt;p&gt;那么IV信息需要保护吗? 可以明文存储吗?&lt;/p&gt;&#xA;&lt;p&gt;答案是&lt;strong&gt;IV并非敏感信息&lt;/strong&gt;, 但IV的生成要&lt;strong&gt;完全随机&lt;/strong&gt;, 每次加密都使用不同的IV.&lt;/p&gt;&#xA;&lt;p&gt;最后, 我们的设计是: 在数据库中存储加密的敏感信息时, 自己做编码, 将IV+加密后的秘文base64后存在一个varchar中. 解密时, 需要先解出IV和密文, 配合秘钥才能解出原始信息.&lt;/p&gt;&#xA;&lt;h2 id=&#34;秘钥&#34;&gt;秘钥&lt;/h2&gt;&#xA;&lt;p&gt;秘钥肯定是要安全保存的, 有几个方案:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;如果有配置中心, 秘钥是作为敏感配置存储的, 只有程序启动时才能读取. 此类配置由专人管理, 开发人员无修改和查看权限.&lt;/li&gt;&#xA;&lt;li&gt;借助云厂商的机制, 譬如AWS的Secrets Manager配合IAM使用.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;后记&#34;&gt;后记&lt;/h2&gt;&#xA;&lt;p&gt;看到很多网上文章中的AES加解密示例, 将IV设置为固定值, 或者将IV设置为秘钥的前N位, 应该是个错误.&lt;/p&gt;&#xA;&lt;h2 id=&#34;参考&#34;&gt;参考&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation&#34;&gt;Wikipedia: Block cipher mode of operation&#xA;&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://security.stackexchange.com/questions/17044/when-using-aes-and-cbc-is-it-necessary-to-keep-the-iv-secret&#34;&gt;When using AES and CBC, is it necessary to keep the IV secret?&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;</description>
    </item>
    <item>
      <title>Tools Collection 常用工具</title>
      <link>https://bopjiang.github.io/note/tools-collection-%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/</link>
      <pubDate>Tue, 09 Jun 2020 07:34:16 +0800</pubDate>
      <guid>https://bopjiang.github.io/note/tools-collection-%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/</guid>
      <description>&lt;h3 id=&#34;汉语&#34;&gt;汉语&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://www.zdic.net/&#34;&gt;汉典&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://chineseinput.net/&#34;&gt;在线中文输入法&lt;/a&gt; Online Chinese Input Method (IME)&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;打印&#34;&gt;打印&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://www.toolbaba.cn/paper-home&#34;&gt;各种纸张的模版(作文纸,米子格,五线谱,方格纸)&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;颜色&#34;&gt;颜色&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://rgbcolorcode.com/color/gold-metallic&#34;&gt;调色&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;audio--video&#34;&gt;Audio &amp;amp; Video&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://audiomass.co/&#34;&gt;AudioMass&lt;/a&gt;, a free, open source, web-based Audio and Waveform Editor.&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://twittervideodownloader.com/&#34;&gt;Twitter Video Download&lt;/a&gt;A&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;dev&#34;&gt;Dev&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://devdocs.io/go/&#34;&gt;Go doc&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://crontab.guru/#5_4_*_*_*&#34;&gt;crontab checker&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://regex101.com/&#34;&gt;online regex tester&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;vps&#34;&gt;VPS&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://www.linode.com/?r=6ecf77639286e9a1ced5820509f0ba488bdbdaef&#34;&gt;linode&lt;/a&gt;, 比AWS EC2计费模式简单, 而且2T的传输完全够了. AWS数据传输每GB$0.01~0.02, 对个人用户是个大坑.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;storage&#34;&gt;Storage&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://mega.nz/&#34;&gt;mega&lt;/a&gt; 50G free space.&lt;/li&gt;&#xA;&lt;li&gt;[cryptomator] encryption&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;ssl&#34;&gt;SSL&lt;/h3&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://crt.sh/?q=tencent.com&#34;&gt;https://crt.sh/?q=tencent.com&lt;/a&gt; 可以看到申请域名的记录&lt;/p&gt;&#xA;&lt;h3 id=&#34;other&#34;&gt;other&lt;/h3&gt;&#xA;&lt;p&gt;Temperature in shell:  &lt;code&gt;curl https://wttr.in/Shenzhen&lt;/code&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>AWS知识汇总</title>
      <link>https://bopjiang.github.io/note/aws%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB/</link>
      <pubDate>Tue, 02 Jun 2020 07:00:46 +0800</pubDate>
      <guid>https://bopjiang.github.io/note/aws%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB/</guid>
      <description>&lt;h2 id=&#34;aws-in-one-word&#34;&gt;AWS IN ONE WORD&lt;/h2&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://adayinthelifeof.nl/2020/05/20/aws.html&#34;&gt;Amazon Web Services in a single one-liner&lt;/a&gt;, 一句话介绍AWS各项服务.&lt;/p&gt;&#xA;&lt;h2 id=&#34;ebs&#34;&gt;EBS&lt;/h2&gt;&#xA;&lt;p&gt;常用的卷类型有GP2和ST1.&lt;/p&gt;&#xA;&lt;p&gt;ST1卷,  1TB磁盘, 基线(baseline)吞吐率为&lt;a href=&#34;https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-volume-types.html#EBSVolumeTypes_st1&#34;&gt;40MiB/s&lt;/a&gt;, 瞬时(burst)吞吐率为250MiB/s. 但是有个前提, 必须是顺序IO, 并且&lt;a href=&#34;https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-io-characteristics.html#ebs-io-size-throughput-limits&#34;&gt;每个IO需要达到1MB大小&lt;/a&gt;, 不然吞吐率上不去. (实测, 125KB IO大小, 吞吐率只有7MiB/s, 也就是IOPS 只能60左右).&lt;/p&gt;&#xA;&lt;p&gt;IO大小可以通过&lt;code&gt;VolumnReadBytes&lt;/code&gt; / &lt;code&gt;VolumeReadOps&lt;/code&gt;得到, 但是Cloudwatch是不支持两个指标做数学运算的.&lt;/p&gt;&#xA;&lt;p&gt;有随机I/O的负载, 还是建议使用GP2类型.&lt;/p&gt;&#xA;&lt;h2 id=&#34;efs&#34;&gt;EFS&lt;/h2&gt;&#xA;&lt;p&gt;就是NFS. 除了要在多个机器挂载, 一般用EBS就够了, EFS成本比EBS贵3倍以上. 不过多个机器共享数据, 用S3会更便宜, 方案也更通用.&lt;/p&gt;&#xA;&lt;p&gt;EFS是异步写入, &lt;a href=&#34;https://docs.aws.amazon.com/efs/latest/ug/performance-tips.html&#34;&gt;存在一致性问题&lt;/a&gt;, A机器上写入后, B机器不是一定能马上读到.&lt;/p&gt;&#xA;&lt;p&gt;有个&lt;a href=&#34;https://forums.aws.amazon.com/ann.jspa?annID=6444&#34;&gt;内核Bug&lt;/a&gt;, 会导致文件系统hang住. 需要升级内核才能解决.&lt;/p&gt;&#xA;&lt;h2 id=&#34;cloudfront-cnd&#34;&gt;Cloudfront (CND)&lt;/h2&gt;&#xA;&lt;p&gt;SSL configuration in cloudfront:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://sendgrid.com/docs/ui/account-and-settings/custom-ssl-configurations/&#34;&gt;Instruction in Sendgrid&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://support.iterable.com/hc/en-us/articles/115000427446-How-to-Set-up-HTTPS-for-Links-for-Click-Tracking&#34;&gt;Instruction in Iterable&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;Cloudfront可以配置简单的分发规则, 根据请求域名、Path分发到Upstream(可以是S3)&lt;/p&gt;&#xA;&lt;h2 id=&#34;elb&#34;&gt;ELB&lt;/h2&gt;&#xA;&lt;p&gt;ELB分为四层(NLB)和七层(ALB)两种.&lt;/p&gt;&#xA;&lt;p&gt;面对大量突发请求时(如秒杀活动), ELB可能需要提前预热.&lt;/p&gt;&#xA;&lt;p&gt;ALB上的配置规则不能过多, 最多只能有100条.&#xA;要关注ALB的stickness设置, slow start设置(&lt;code&gt;TODO&lt;/code&gt;).&lt;/p&gt;</description>
    </item>
    <item>
      <title>G-Suite知识汇总</title>
      <link>https://bopjiang.github.io/note/g-suite%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB/</link>
      <pubDate>Tue, 02 Jun 2020 07:00:30 +0800</pubDate>
      <guid>https://bopjiang.github.io/note/g-suite%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB/</guid>
      <description>&lt;h2 id=&#34;gmail&#34;&gt;Gmail&lt;/h2&gt;&#xA;&lt;h3 id=&#34;open-draft-in-new-window&#34;&gt;open draft in new window&lt;/h3&gt;&#xA;&lt;p&gt;press &lt;strong&gt;Shift&lt;/strong&gt; when &lt;strong&gt;click&lt;/strong&gt;.&lt;/p&gt;&#xA;&lt;h2 id=&#34;google-drive&#34;&gt;Google Drive&lt;/h2&gt;&#xA;&lt;h3 id=&#34;create-a-symbolic-link&#34;&gt;&lt;a href=&#34;https://www.bustercollings.com/blog/2014/06/14/how-to-copy-a-file-or-folder-in-google-drive-create-a-symbolic-link-symlink/&#34;&gt;Create a Symbolic Link&lt;/a&gt;&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Click to highlight the file(s) and folder(s) you want to copy&lt;/li&gt;&#xA;&lt;li&gt;Press &lt;strong&gt;Shift-Z&lt;/strong&gt; to open a dialog with the “&lt;strong&gt;Add here&lt;/strong&gt;” button&lt;/li&gt;&#xA;&lt;li&gt;Navigate to the destination folder&lt;/li&gt;&#xA;&lt;li&gt;Press “&lt;strong&gt;Add here&lt;/strong&gt;”&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;google-docs&#34;&gt;Google Docs&lt;/h2&gt;&#xA;&lt;h3 id=&#34;new-google-docs-quickly&#34;&gt;New Google docs quickly&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://doc.new&#34;&gt;new Doc&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://sheet.new&#34;&gt;new Sheet&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://slides.new&#34;&gt;new Slide&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;generate-random-string-in-sheet&#34;&gt;generate random string in Sheet&lt;/h3&gt;&#xA;&lt;p&gt;Add customized function as &lt;a href=&#34;https://yagisanatode.com/2018/08/23/google-sheets-random-alphabetic-random-alphanumeric-and-random-alphanumeric-character-custom-functions/&#34;&gt;link&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;code&gt;=RANDALPHA(2,0)&amp;amp;RANDALPHA(10, 2)&lt;/code&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;chrome&#34;&gt;Chrome&lt;/h2&gt;&#xA;&lt;h3 id=&#34;disable-auto-update&#34;&gt;disable auto update&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ cat /etc/hosts&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# disable chrome update&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;127.0.0.1 tools.google.com&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    <item>
      <title>MacOS Tips</title>
      <link>https://bopjiang.github.io/note/macos-tips/</link>
      <pubDate>Sun, 31 May 2020 09:59:35 +0800</pubDate>
      <guid>https://bopjiang.github.io/note/macos-tips/</guid>
      <description>&lt;h2 id=&#34;basic&#34;&gt;Basic&lt;/h2&gt;&#xA;&lt;h3 id=&#34;keyboard-shortcuts&#34;&gt;Keyboard Shortcuts&lt;/h3&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;command&lt;/th&gt;&#xA;          &lt;th style=&#34;text-align: center&#34;&gt;Usages&lt;/th&gt;&#xA;          &lt;th style=&#34;text-align: right&#34;&gt;Comments&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;⌘ + ↑&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;Go To the Parent Directory&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: right&#34;&gt;&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;alt + ←&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;move left a space&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: right&#34;&gt;&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;alt + →&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;move right a space&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: right&#34;&gt;&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;⌘   + `&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;swith windows inside the application&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: right&#34;&gt;NOTE: doesn&amp;rsquo;t work for windows running in full screen&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;h2 id=&#34;bash&#34;&gt;Bash&lt;/h2&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;## use gnu readlink instead of readlink&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;greadlink -f ./1.txt&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;gfind . -name &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;XXX&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;tools&#34;&gt;Tools&lt;/h2&gt;&#xA;&lt;h3 id=&#34;color-picker&#34;&gt;color picker&lt;/h3&gt;&#xA;&lt;p&gt;use &lt;em&gt;&lt;strong&gt;Digital Color Meter&lt;/strong&gt;&lt;/em&gt; in MacOS&lt;/p&gt;</description>
    </item>
    <item>
      <title>博客迁移至Hugo</title>
      <link>https://bopjiang.github.io/post/2020/05/30/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E8%87%B3hugo/</link>
      <pubDate>Sat, 30 May 2020 07:25:48 +0800</pubDate>
      <guid>https://bopjiang.github.io/post/2020/05/30/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E8%87%B3hugo/</guid>
      <description>&lt;p&gt;作为一个Gopher, 今天终于将博客从Jeklly迁移到了Hugo. 并不是一帆风顺, 折腾了大半天.&lt;/p&gt;&#xA;&lt;p&gt;首先, Hugo同Jeklly Markdown文件的元数据有区别. 为了转为Hugo格式, 使用了一个工具&lt;a href=&#34;https://github.com/coderzh/ConvertToHugo&#34;&gt;ConvertToHugo&lt;/a&gt;, 是Python 2写的. 转换后的文件, date字段缺失. 因为之前时间是从文件名截取的(如: &lt;code&gt;2019-03-02&lt;/code&gt;-go-http-timeout.md),  所以自己写了个&lt;a href=&#34;https://gist.github.com/bopjiang/b47132a97fd32ff99f73174de5bace89&#34;&gt;脚本&lt;/a&gt;解决.&lt;/p&gt;&#xA;&lt;p&gt;其次, git submodule用得少, 碰到一些问题, 特别是删除submodule, 最后在stackoverflow找到的&lt;a href=&#34;https://stackoverflow.com/questions/29850029/what-is-the-current-way-to-remove-a-git-submodule&#34;&gt;答案&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git submodule deinit &amp;lt;asubmodule&amp;gt;    &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git rm &amp;lt;asubmodule&amp;gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Note: asubmodule (no trailing slash)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# or, if you want to leave it in your working tree&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git rm --cached &amp;lt;asubmodule&amp;gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rm -rf .git/modules/&amp;lt;asubmodule&amp;gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;还有, 为了提交.md文件后, 博客能自动渲染, 使用Github Action建立了个CD流程.&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Push to GitHub Pages on push to master&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;on&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;push&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;branches&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - &lt;span style=&#34;color:#ae81ff&#34;&gt;master&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;jobs&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;build&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Deploy&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;runs-on&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;ubuntu-latest&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;steps&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Checkout master&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;uses&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;actions/checkout@v1&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;with&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;submodules&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;true&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;## 使用了submodule&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Deploy the site&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;uses&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;benmatselby/hugo-deploy-gh-pages@v1.4.0&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;env&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;HUGO_VERSION&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;0.71.1&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;TARGET_REPO&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;bopjiang/bopjiang.github.io&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;TOKEN&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;${{ secrets.TOKEN }}&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;## access token, 可惜不能给单个库做授权.&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;最后, 建立两个代码仓库:&lt;/p&gt;</description>
    </item>
    <item>
      <title>关于API、协议设计的一点思考</title>
      <link>https://bopjiang.github.io/post/2019/05/05/%E5%85%B3%E4%BA%8Eapi%E5%8D%8F%E8%AE%AE%E8%AE%BE%E8%AE%A1%E7%9A%84%E4%B8%80%E7%82%B9%E6%80%9D%E8%80%83/</link>
      <pubDate>Sun, 05 May 2019 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2019/05/05/%E5%85%B3%E4%BA%8Eapi%E5%8D%8F%E8%AE%AE%E8%AE%BE%E8%AE%A1%E7%9A%84%E4%B8%80%E7%82%B9%E6%80%9D%E8%80%83/</guid>
      <description>&lt;p&gt;最近几年有幸在两家公司从零开始主导了两个系统对外API、协议的的设计, 最近也在反思在协议设计中的问题(自己埋下的坑).&lt;/p&gt;&#xA;&lt;h2 id=&#34;自定义二进制协议&#34;&gt;自定义二进制协议&lt;/h2&gt;&#xA;&lt;p&gt;先讲第一家ToC的互联网公司, 客户端是手机APP. 因为涉及到VOIP相关业务, 客户端-服务端必须具备双工通信能力, 同时为了节省流量, 选择了基于TCP的二进制协议.(当然也跟我当时从传统通信行业出来有关)&lt;/p&gt;&#xA;&lt;p&gt;一个系统当然不是凭空设计出来的, 从中一定能看出组织架构的影子.当时我这边主要负责接入层这块, VoIP SIP信令是另一个团队在负责, 本着两个团队间代码最小耦合的原则, 于是乎, 协议就分为了两层, 一层负责消息路由(报文头), 一层负责业务数据(报文体).&#xA;具体到字段设计&lt;/p&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;字段名称&lt;/th&gt;&#xA;          &lt;th&gt;宽度(Byte)&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;报文头长度&lt;/td&gt;&#xA;          &lt;td&gt;2&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;报文体长度&lt;/td&gt;&#xA;          &lt;td&gt;2&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;报文头&lt;/td&gt;&#xA;          &lt;td&gt;变长&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;报文体&lt;/td&gt;&#xA;          &lt;td&gt;变长&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;p&gt;为了保证版本向后扩展, 在TCP三次握手完成后, 客户端必须主动发送一个版本号消息.&lt;/p&gt;&#xA;&lt;p&gt;因为是TCP长连接,所以必须要有应用层心跳消息进行连接保活, 4个Bytes的全0就行了(报文头长度和报文体长度都设置为0)&lt;/p&gt;&#xA;&lt;p&gt;这里的版本号在后来还真起到了很大的用处, 报文头最开始用的是JSON编码, 后面改为Protocol Buffers, 版本号在这块帮助了协议的平滑升级.&lt;/p&gt;&#xA;&lt;h3 id=&#34;遇到的坑&#34;&gt;遇到的坑&lt;/h3&gt;&#xA;&lt;p&gt;由于我们的二进制协议没有特殊的边界字符(magic number), 导致客户端处理异常时, 没有很快的检测到报文错误(&lt;code&gt;Fail Fast&lt;/code&gt;), 会导致服务端一致读阻塞(读到错误的报文头或报文体长度字段).&lt;/p&gt;&#xA;&lt;p&gt;报文体长度的宽度, 2个字节一般是够用了, 设计4字节大小的报文体, 也不太合适,万一谁不小心发个几百M的巨包, 岂不是把整条TCP连接都阻塞住了?&#xA;但是大报文的场景总是存在的, 预先设计好&lt;code&gt;分帧协议&lt;/code&gt;是很有必要的.&lt;/p&gt;&#xA;&lt;p&gt;二进制协议调试定位上会有一定难度, 特别是协议开发初期, 数据结构不稳定时.想到在Wireshark里看一堆二进制符号现在都有些头疼, 如果是PB协议, 更是令人抓狂. 相比而言, HTTP明文协议调试起来就简单多了.&lt;/p&gt;&#xA;&lt;h2 id=&#34;rest-api&#34;&gt;REST API&lt;/h2&gt;&#xA;&lt;p&gt;第二家是硬件独角兽, 我从事的是ToB系统的设计. API主要提供给外部用户使用, HTTP看上去是不错选择. 这个API设计的时候, 严格遵循了REST风格, 每个请求都包含:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;动词(HTTP Method: GET POST PUT PATCH DELETE)&lt;/li&gt;&#xA;&lt;li&gt;资源属性&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;其中, GET、PUT、DELETE请求都是幂等的. PUT用来整体更新或覆盖, PATCH是做部分修改.&lt;/p&gt;</description>
    </item>
    <item>
      <title>MySQL和TiDB事务区别</title>
      <link>https://bopjiang.github.io/post/2019/04/21/mysql%E5%92%8Ctidb%E4%BA%8B%E5%8A%A1%E5%8C%BA%E5%88%AB/</link>
      <pubDate>Sun, 21 Apr 2019 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2019/04/21/mysql%E5%92%8Ctidb%E4%BA%8B%E5%8A%A1%E5%8C%BA%E5%88%AB/</guid>
      <description>&lt;p&gt;我们知道, MySQL的默认隔离级别是可重复读(RR, Repeatable Read). TiDB是快照隔离 (SI, Snapshot Isolation), 虽然对外显示为Repeatable Read).&lt;/p&gt;&#xA;&lt;p&gt;TiDB 使用 Percolator 事务模型, 冲突检测只在事务提交时才触发, 而MySQL则是通过锁等待机制(如SELECT &amp;hellip; FOR UPDATE)解决冲突问题.TiDB这样设计有好有坏, 在冲突小的情况下,由于没有锁等待,系统的并发性能更好. 但在冲突严重的情况下, 会造成事务失败增多,影响并发性能.&lt;/p&gt;&#xA;&lt;p&gt;反映到应用开发中, 我们会发现, 在很多场景, MySQL事务提交成功, 但是TiDB事务提交却可能会失败.&#xA;如果应用代码有在事务执行过程中穿插业务判断逻辑, 是不能依赖TiDB自带的事务重试机制的. 这时,要显式的关闭事务重试, 重试逻辑必须放到业务层来做.&lt;/p&gt;&#xA;&lt;h2 id=&#34;例子&#34;&gt;例子&lt;/h2&gt;&#xA;&lt;p&gt;下面三个例子, 从TiDB和MySQL执行结果和逻辑的区别, 我们可以看到两个数据库系统在事务处理上的差别.&lt;/p&gt;&#xA;&lt;p&gt;本文中MySQL的版本是8.0.15, TiDB的版本是v2.1.7, 事务隔离级别都为默认值Repeatable Read.&lt;/p&gt;&#xA;&lt;h3 id=&#34;例1-update在事务中处理逻辑不同&#34;&gt;例1: Update在事务中处理逻辑不同&lt;/h3&gt;&#xA;&lt;p&gt;创建表t1, 语句如下:&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;TABLE&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;`&lt;/span&gt;t1&lt;span style=&#34;color:#f92672&#34;&gt;`&lt;/span&gt; (&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;`&lt;/span&gt;a&lt;span style=&#34;color:#f92672&#34;&gt;`&lt;/span&gt; int(&lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;NOT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NULL&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;`&lt;/span&gt;b&lt;span style=&#34;color:#f92672&#34;&gt;`&lt;/span&gt; int(&lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;DEFAULT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NULL&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;PRIMARY&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;KEY&lt;/span&gt; (&lt;span style=&#34;color:#f92672&#34;&gt;`&lt;/span&gt;a&lt;span style=&#34;color:#f92672&#34;&gt;`&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;在MySQL和TiDB中分别执行下面的两个事务, 执行时序如下:&lt;/p&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;Time&lt;/th&gt;&#xA;          &lt;th&gt;Tx1&lt;/th&gt;&#xA;          &lt;th&gt;Tx2&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;t0&lt;/td&gt;&#xA;          &lt;td&gt;begin;&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;t1&lt;/td&gt;&#xA;          &lt;td&gt;select * from t1;&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;t2&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;          &lt;td&gt;begin;&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;t3&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;          &lt;td&gt;insert into t1 values(1,10);&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;t4&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;          &lt;td&gt;commit;&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;t5&lt;/td&gt;&#xA;          &lt;td&gt;update t1 set b=b+10 where a = 1;&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;t6&lt;/td&gt;&#xA;          &lt;td&gt;commit;&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;t7&lt;/td&gt;&#xA;          &lt;td&gt;select * from t1;&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;p&gt;MySQL, t7时刻,select语句的执行结果是&lt;/p&gt;</description>
    </item>
    <item>
      <title>SQL语句解析为AST</title>
      <link>https://bopjiang.github.io/post/2019/04/02/sql%E8%AF%AD%E5%8F%A5%E8%A7%A3%E6%9E%90%E4%B8%BAast/</link>
      <pubDate>Tue, 02 Apr 2019 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2019/04/02/sql%E8%AF%AD%E5%8F%A5%E8%A7%A3%E6%9E%90%E4%B8%BAast/</guid>
      <description>&lt;p&gt;TiDB中的SQL Parser模块现在独立为一个库了，在其他项目也可以很方便的调用。&lt;/p&gt;&#xA;&lt;p&gt;一个例子：&lt;/p&gt;&#xA;&lt;script src=&#34;https://gist.github.com/bopjiang/b5d7de1471d1a1be3387e33c6eb30591.js&#34;&gt;&lt;/script&gt;&#xA;&lt;h2 id=&#34;ast&#34;&gt;AST&lt;/h2&gt;&#xA;&lt;p&gt;解析出来是如下的样子：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-0 *ast.SelectStmt SELECT t1.a, t2.b FROM t1 JOIN t2 ON t1.id = t2.fid WHERE t1.c&amp;gt;100&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-1 &#x9;*ast.TableRefsClause&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-2 &#x9;&#x9;*ast.Join&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-3 &#x9;&#x9;&#x9;*ast.TableSource&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-4 &#x9;&#x9;&#x9;&#x9;*ast.TableName&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-3 &#x9;&#x9;&#x9;*ast.TableSource&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-4 &#x9;&#x9;&#x9;&#x9;*ast.TableName&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-3 &#x9;&#x9;&#x9;*ast.OnCondition&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-4 &#x9;&#x9;&#x9;&#x9;*ast.BinaryOperationExpr&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-5 &#x9;&#x9;&#x9;&#x9;&#x9;*ast.ColumnNameExpr&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-6 &#x9;&#x9;&#x9;&#x9;&#x9;&#x9;*ast.ColumnName&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-5 &#x9;&#x9;&#x9;&#x9;&#x9;*ast.ColumnNameExpr&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-6 &#x9;&#x9;&#x9;&#x9;&#x9;&#x9;*ast.ColumnName&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-1 &#x9;*ast.BinaryOperationExpr&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-2 &#x9;&#x9;*ast.ColumnNameExpr&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-3 &#x9;&#x9;&#x9;*ast.ColumnName&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-2 &#x9;&#x9;*driver.ValueExpr&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-1 &#x9;*ast.FieldList&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-2 &#x9;&#x9;*ast.SelectField t1.a&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-3 &#x9;&#x9;&#x9;*ast.ColumnNameExpr&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-4 &#x9;&#x9;&#x9;&#x9;*ast.ColumnName&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-2 &#x9;&#x9;*ast.SelectField t2.b&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-3 &#x9;&#x9;&#x9;*ast.ColumnNameExpr&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;L-4 &#x9;&#x9;&#x9;&#x9;*ast.ColumnName&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;SELECT语句被解析为三部分(L-1), TableRefsClause对应FROM语句部分，BinaryOperationExpr对应WHERE语句部分，FieldList对应Select字段部分&lt;/p&gt;</description>
    </item>
    <item>
      <title>关于Go HTTP Timeout</title>
      <link>https://bopjiang.github.io/post/2019/03/02/%E5%85%B3%E4%BA%8Ego-http-timeout/</link>
      <pubDate>Sat, 02 Mar 2019 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2019/03/02/%E5%85%B3%E4%BA%8Ego-http-timeout/</guid>
      <description>&lt;p&gt;上周碰到一个使用Traefik反向代理的问题, 正好跟HTTP Timeout相关，现将分析过程总结如下。&lt;/p&gt;&#xA;&lt;h2 id=&#34;问题现象&#34;&gt;问题现象&lt;/h2&gt;&#xA;&lt;p&gt;客户端的一个文件请求，先经过反向代理， 再经过Server，最后数据从Storage中获取（类似S3）。 基本架构如下：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;+----------------------+&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;|  Client              |&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;+----------------------+&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        |&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  GET /FileA HTTP/1.1&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        |&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        |&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; +-----------------------+        +-----------------+       +-----------------+&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; | Nginx/Traefik         |--------|  Server         |-------|  Storage        |&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; +-----------------------+        +-----------------+       +-----------------+&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;反向代理最开始是使用的Nginx， 后来因为服务都在Docker部署，切换到Traefik。&lt;/p&gt;&#xA;&lt;p&gt;开始还没有问题, 直到有一天, 测试同学反馈客户端偶尔&lt;code&gt;GET /AFile&lt;/code&gt;请求老是被异常关闭， 请求响应越大概率失败概率越大， 网速不好的时候更容易出现。最开始还以为是客户端的锅。&lt;/p&gt;&#xA;&lt;h2 id=&#34;问题定位&#34;&gt;问题定位&lt;/h2&gt;&#xA;&lt;p&gt;后面试了好几个客户端版本， 问题依然存在， 看来跟客户端最近的更新无关。&lt;/p&gt;&#xA;&lt;p&gt;排除了客户端后，开始怀疑Traefik这块配置有问题。查看服务端日志， 果然失败时Taefik有日志打印：&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;2018/12/19 09:16:54 reverseproxy.go:395: httputil: ReverseProxy read error during body copy: unexpected EOF&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;traefik 上有个issue &lt;a href=&#34;https://github.com/containous/traefik/issues/2903&#34;&gt;#2903&lt;/a&gt; Truncated body when unexpected EOF，跟我们看到的现象是一样的。切换到Nginx后，问题不出现了, 更加证实了我们的判断。&lt;/p&gt;</description>
    </item>
    <item>
      <title>Golang程序问题定位方法</title>
      <link>https://bopjiang.github.io/post/2017/10/31/golang%E7%A8%8B%E5%BA%8F%E9%97%AE%E9%A2%98%E5%AE%9A%E4%BD%8D%E6%96%B9%E6%B3%95/</link>
      <pubDate>Tue, 31 Oct 2017 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2017/10/31/golang%E7%A8%8B%E5%BA%8F%E9%97%AE%E9%A2%98%E5%AE%9A%E4%BD%8D%E6%96%B9%E6%B3%95/</guid>
      <description>&lt;p&gt;本文总结的方法对Go1.6及以后版本有效。&lt;/p&gt;&#xA;&lt;h2 id=&#34;运行时问题&#34;&gt;运行时问题&lt;/h2&gt;&#xA;&lt;p&gt;通过暴露http接口把运行栈打出来：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-Go&#34; data-lang=&#34;Go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;net/http/pprof&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;命令如下:&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl http://server:port/debug/pprof/goroutine?debug&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;参数debug=1时输出按照goroutine的当前栈位置汇总过的栈信息。 譬如可以看到某类goroutine运行了多少个，在遇到goroutine泄露的问题时比较有用。&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;goroutine profile: total 104&#xA;100 @ 0x102ebdc 0x102ecce 0x10065a4 0x100624b 0x12e3683 0x105cbd1&#xA;#&#x9;0x12e3682&#x9;main.foo+0x42&#x9;/Users/bopjiang/code/test/go/stackdump.go:18&#xA;&#xA;1 @ 0x102ebdc 0x1029b8a 0x1029187 0x108f55e 0x108f5dd 0x109037a 0x10f1242 0x110264d 0x1258052 0x105cbd1&#xA;#&#x9;0x1029186&#x9;internal/poll.runtime_pollWait+0x56&#x9;&#x9;/usr/local/go/src/runtime/netpoll.go:173&#xA;#&#x9;0x108f55d&#x9;internal/poll.(*pollDesc).wait+0xad&#x9;&#x9;/usr/local/go/src/internal/poll/fd_poll_runtime.go:85&#xA;#&#x9;0x108f5dc&#x9;internal/poll.(*pollDesc).waitRead+0x3c&#x9;&#x9;/usr/local/go/src/internal/poll/fd_poll_runtime.go:90&#xA;#&#x9;0x1090379&#x9;internal/poll.(*FD).Read+0x189&#x9;&#x9;&#x9;/usr/local/go/src/internal/poll/fd_unix.go:125&#xA;#&#x9;0x10f1241&#x9;net.(*netFD).Read+0x51&#x9;&#x9;&#x9;&#x9;/usr/local/go/src/net/fd_unix.go:202&#xA;#&#x9;0x110264c&#x9;net.(*conn).Read+0x6c&#x9;&#x9;&#x9;&#x9;/usr/local/go/src/net/net.go:176&#xA;#&#x9;0x1258051&#x9;net/http.(*connReader).backgroundRead+0x61&#x9;/usr/local/go/src/net/http/server.go:660&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl http://server:port/debug/pprof/goroutine?debug&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;参数debug=2时输出的是详细每个goroutine的运行状态：调用栈信息，传入参数值，阻塞事件等待时间&#xA;最后的等待时间对定位程序挂起的问题很有用。譬如某个goroutine的channel写入阻塞了1个小时，那很有可能此channel的消费端出了问题。&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;goroutine &lt;span style=&#34;color:#ae81ff&#34;&gt;47&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;chan receive, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; minutes&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;main.foo&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;0x1d&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;/Users/bopjiang/code/test/go/stackdump.go:23 +0x7c&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;created by main.main&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;/Users/bopjiang/code/test/go/stackdump.go:33 +0xae&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;goroutine &lt;span style=&#34;color:#ae81ff&#34;&gt;48&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;chan receive, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; minutes&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;main.foo&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;0x0&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;/Users/bopjiang/code/test/go/stackdump.go:18 +0x43&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;created by main.main&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;/Users/bopjiang/code/test/go/stackdump.go:28 +0xae&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;goroutine &lt;span style=&#34;color:#ae81ff&#34;&gt;118&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;running&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;runtime/pprof.writeGoroutineStacks&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;0x154b720, 0xc4201901c0, 0x0, 0xc42004fad0&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;/usr/local/go/src/runtime/pprof/pprof.go:608 +0xa7&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;runtime/pprof.writeGoroutine&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;0x154b720, 0xc4201901c0, 0x2, 0x30, 0x135ff20&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;/usr/local/go/src/runtime/pprof/pprof.go:597 +0x44&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;runtime/pprof.&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;*Profile&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;.WriteTo&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;0x157d720, 0x154b720, 0xc4201901c0, 0x2, 0xc4201901c0, 0x15893e0&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;/usr/local/go/src/runtime/pprof/pprof.go:310 +0x3ab&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;net/http/pprof.handler.ServeHTTP&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;0xc42001ea31, 0x9, 0x154fb20, 0xc4201901c0, 0xc420112400&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;/usr/local/go/src/net/http/pprof/pprof.go:237 +0x1b8&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;net/http/pprof.Index&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;0x154fb20, 0xc4201901c0, 0xc420112400&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;/usr/local/go/src/net/http/pprof/pprof.go:248 +0x1db&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;net/http.HandlerFunc.ServeHTTP&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;0x13b54d0, 0x154fb20, 0xc4201901c0, 0xc420112400&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;/usr/local/go/src/net/http/server.go:1918 +0x44&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;net/http.&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;*ServeMux&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;.ServeHTTP&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;0x15893e0, 0x154fb20, 0xc4201901c0, 0xc420112400&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;/usr/local/go/src/net/http/server.go:2254 +0x130&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;net/http.serverHandler.ServeHTTP&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;0xc4201281a0, 0x154fb20, 0xc4201901c0, 0xc420112400&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;/usr/local/go/src/net/http/server.go:2619 +0xb4&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;net/http.&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;*conn&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;.serve&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;0xc420184000, 0x15501e0, 0xc420126100&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;/usr/local/go/src/net/http/server.go:1801 +0x71d&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;created by net/http.&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;*Server&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;.Serve&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;/usr/local/go/src/net/http/server.go:2720 +0x288&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;崩溃问题&#34;&gt;崩溃问题&lt;/h2&gt;&#xA;&lt;p&gt;找崩溃原因，遇到大部分都是nil reference。&#xA;输出跟debug=2一样格式的栈信息（只不过只有崩溃goroutine一个栈的）。&lt;/p&gt;</description>
    </item>
    <item>
      <title>开源常用术语</title>
      <link>https://bopjiang.github.io/post/2017/08/15/%E5%BC%80%E6%BA%90%E5%B8%B8%E7%94%A8%E6%9C%AF%E8%AF%AD/</link>
      <pubDate>Tue, 15 Aug 2017 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2017/08/15/%E5%BC%80%E6%BA%90%E5%B8%B8%E7%94%A8%E6%9C%AF%E8%AF%AD/</guid>
      <description>&lt;h3 id=&#34;术语&#34;&gt;术语&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;CL: change lists&lt;/p&gt;&#xA;&lt;p&gt;Code is written and packaged as a unit that called a change list, or CL for short.   &lt;em&gt;&amp;ldquo;How Google Tests Software&amp;rdquo;, James A. Whittaker, Jason Arbon, Jeff Carollo&lt;/em&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>《Raspberry Pi入门指南》读书笔记</title>
      <link>https://bopjiang.github.io/post/2015/10/01/raspberry-pi%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</link>
      <pubDate>Thu, 01 Oct 2015 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2015/10/01/raspberry-pi%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</guid>
      <description>&lt;p&gt;Raspberry Pi 入手两年了，除了装过XMBC看电视外，基本没怎么用了。偶然在图书馆发现这本&lt;a href=&#34;http://book.douban.com/subject/26336217/&#34;&gt;&amp;laquo;Raspberry Pi入门指南&amp;raquo;&lt;/a&gt;，作为入门读物还是不错的。&lt;/p&gt;&#xA;&lt;p&gt;简单摘要下：&lt;/p&gt;&#xA;&lt;h3 id=&#34;模块&#34;&gt;模块&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;CSI接口(Camera Serial Interface), 摄像头&#xA;淘宝上有大把&lt;/li&gt;&#xA;&lt;li&gt;DSI接口(Display Serial Interface)&lt;/li&gt;&#xA;&lt;li&gt;GPIO 作为单片机驱动外围设备&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;使用场景&#34;&gt;使用场景&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;BT下载器&#xA;使用aria2(&lt;a href=&#34;http://aria2.sourceforge.net/&#34;&gt;http://aria2.sourceforge.net/&lt;/a&gt;)&#xA;在chrome中使用Yaaw插件（Yet Another Aria2 Web）, 使用aria2提供的JSON RPC接口远程控制&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;XBMC&#xA;介绍的XBian&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;文件服务器samba&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;gpio编程&#34;&gt;GPIO编程&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;控制LED灯闪烁&#xA;面包板，杜邦线(跳线), LED灯&#xA;&lt;ul&gt;&#xA;&lt;li&gt;SHELL/BASH控制， 操作文件&lt;/li&gt;&#xA;&lt;li&gt;Python,使用RPi.GPIO包&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;温度传感器&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;图像处理&#34;&gt;图像处理&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;CSI&lt;/li&gt;&#xA;&lt;li&gt;USB口WebCam&#xA;罗技C270WebCam，720P&#xA;&lt;ul&gt;&#xA;&lt;li&gt;luvcview实时看视频流&lt;/li&gt;&#xA;&lt;li&gt;uvccapeture截图&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;其他软件&#xA;&lt;ul&gt;&#xA;&lt;li&gt;motion&lt;/li&gt;&#xA;&lt;li&gt;python:SimpleCV&#xA;Haar Cascade哈尔分类，面部识别&#xA;2013-08: SimpleCV暂时还不能从CSI取视频&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;arduino开源电子原型平台&#34;&gt;Arduino开源电子原型平台&lt;/h3&gt;&#xA;&lt;p&gt;使用USB与Pi相连， 串口通信&lt;/p&gt;&#xA;&lt;p&gt;python中import serial&lt;/p&gt;&#xA;&lt;h3 id=&#34;raspberry-pi-2&#34;&gt;Raspberry Pi 2&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;新出的Raspberry Pi升级版本Raspberry Pi 2 ，可跑“官方精简版” Ubuntu Core&lt;/li&gt;&#xA;&lt;li&gt;建议使用lxde图形界面（和debian类似）， 安装xrdp支持windows上使用远程桌面连接&lt;/li&gt;&#xA;&lt;li&gt;听说可可运行win10&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>网络电话几种模式</title>
      <link>https://bopjiang.github.io/post/2015/08/25/%E7%BD%91%E7%BB%9C%E7%94%B5%E8%AF%9D%E5%87%A0%E7%A7%8D%E6%A8%A1%E5%BC%8F/</link>
      <pubDate>Tue, 25 Aug 2015 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2015/08/25/%E7%BD%91%E7%BB%9C%E7%94%B5%E8%AF%9D%E5%87%A0%E7%A7%8D%E6%A8%A1%E5%BC%8F/</guid>
      <description>&lt;p&gt;移动互联网时代，通过在手机上安装个APP打网络电话是再自然不过的事情了。&lt;/p&gt;&#xA;&lt;p&gt;市面上靠谱一点的有Skype，有信，微会，来电，易信，触宝，而且大部分都打着免费的旗号(真的是免费),谋求占领电话拨号盘的入口。（基本上我手机上都安装了:-)）&lt;/p&gt;&#xA;&lt;p&gt;几种常见的通话模式如下：&lt;/p&gt;&#xA;&lt;h3 id=&#34;ott&#34;&gt;OTT&lt;/h3&gt;&#xA;&lt;p&gt;主叫客户端安装了APP，通过APP发起呼叫，被叫也安装了APP且在线，这时候，主、被叫不需要通过运营商的PSTN网络，直接可以OTT通话（视频、IM也属于此类）&lt;/p&gt;&#xA;&lt;p&gt;大部分电话APP都支持这种通话方式。&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  +---------------------+                +----------------------+&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  | Caller App(Phone)   |                |  Callee App(Phone)   |&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  +---------------------+                +----------------------+&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |                                        |&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     3G/4G/WIFI                                3G/4G/WIFI&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |                                        |&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          | Operator Network                       |&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; +-----------------------+                  +-----------------+&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; | BTS/NodeB/eNodeB/AP...|------------------|  OTT Service    |&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; +-----------------------+                  +-----------------+&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;直拨&#34;&gt;直拨&lt;/h3&gt;&#xA;&lt;p&gt;主叫客户端安装了APP，通过APP发起呼叫，被叫没有安装APP或者不在线，这时候，被叫需要通过运营商的PSTN网络，将被叫唤起。&lt;/p&gt;&#xA;&lt;p&gt;目前只有有信支持这种通话方式。&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  +---------------------+                                  +--------------------------+&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  | Caller App(Phone)   |                                  |  Callee (Phone, No App)  |&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  +---------------------+                                  +--------------------------+&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |                                                           #&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     3G/4G/WIFI                                                       #&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |                                                           #&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          | Operator Network                                          #  Operator Network&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; +-----------------------+        +-----------------+    SIP   +-----------------+&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; | BTS/NodeB/eNodeB/AP...|--------|  OTT Service    | ---------|  PSTN GateWay   |&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; +-----------------------+        +-----------------+          +-----------------+&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;回拨&#34;&gt;回拨&lt;/h3&gt;&#xA;&lt;p&gt;主叫客户端安装了APP，但是因主叫网络质量较差，无法在数据链路传输语音数据。APP发起呼叫请求到服务器，服务器先呼起主叫，再呼起被叫，将二者的媒体流连接在一起,就像主被叫在一个会议室里面。&lt;/p&gt;</description>
    </item>
    <item>
      <title>Ansible, 批量脚本执行神器</title>
      <link>https://bopjiang.github.io/post/2015/08/20/ansible-%E6%89%B9%E9%87%8F%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E7%A5%9E%E5%99%A8/</link>
      <pubDate>Thu, 20 Aug 2015 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2015/08/20/ansible-%E6%89%B9%E9%87%8F%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E7%A5%9E%E5%99%A8/</guid>
      <description>&lt;p&gt;就像产品和运营一样，开发和运维的界限现在也越来越模糊。运维工具还是有很多好东西的, Ansible就是个这样一个。&lt;/p&gt;&#xA;&lt;p&gt;选择Ansbile理由:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;python&lt;/li&gt;&#xA;&lt;li&gt;无须在远程机器上安装agent，直接ssh权限就够了&lt;/li&gt;&#xA;&lt;li&gt;宿主机上没有什么依赖，pip安装Ansible就够了&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;效果如下：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;bopjiang@localhost adhoc&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;$ ansible kafka-broker  -i ./ansible_host -a &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;df -h&amp;#34;&lt;/span&gt; --sudo --sudo-user bopjiang&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;10.10.82.180 | success | rc&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &amp;gt;&amp;gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Filesystem            Size  Used Avail Use% Mounted on&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/dev/sda2              49G   18G   29G  38% /&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;tmpfs                  16G     &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;   16G   0% /dev/shm&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/dev/sda1             194M   31M  153M  17% /boot&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/dev/sda5             1.1T  729G  255G  75% /data&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;10.10.30.207 | success | rc&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &amp;gt;&amp;gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Filesystem            Size  Used Avail Use% Mounted on&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/dev/sda2              97G   46G   46G  51% /&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;tmpfs                  32G     &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;   32G   0% /dev/shm&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/dev/sda1             194M   54M  131M  30% /boot&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/dev/sda5             1.6T  1.1T  335G  78% /data&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;当然你要配置SSH密钥自动登录远程机器，可以参考这个自动化脚本&lt;a href=&#34;https://github.com/bopjiang/ssh-no-password&#34;&gt;ssh-no-password&lt;/a&gt;。&lt;/p&gt;</description>
    </item>
    <item>
      <title>fonts.googleapi导致网页打不开问题</title>
      <link>https://bopjiang.github.io/post/2015/01/30/fonts.googleapi%E5%AF%BC%E8%87%B4%E7%BD%91%E9%A1%B5%E6%89%93%E4%B8%8D%E5%BC%80%E9%97%AE%E9%A2%98/</link>
      <pubDate>Fri, 30 Jan 2015 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2015/01/30/fonts.googleapi%E5%AF%BC%E8%87%B4%E7%BD%91%E9%A1%B5%E6%89%93%E4%B8%8D%E5%BC%80%E9%97%AE%E9%A2%98/</guid>
      <description>&lt;p&gt;经常打开&lt;a href=&#34;https://readthedocs.org&#34;&gt;readthedocs.org&lt;/a&gt;网站时，页面崩溃或很长时间才打开，看了下基本都用到fonts.googleapis提供的字体的服务。&lt;/p&gt;&#xA;&lt;p&gt;解决办法：&lt;/p&gt;&#xA;&lt;p&gt;安装Adblock Plus插件（chrome和firefox都有）， 增加自定义过滤规则：&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;fonts.googleapis.com$stylesheet,match-case&#xA;use.typekit.net$script,match-case&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>使用Pyleus开发Storm应用</title>
      <link>https://bopjiang.github.io/post/2015/01/23/%E4%BD%BF%E7%94%A8pyleus%E5%BC%80%E5%8F%91storm%E5%BA%94%E7%94%A8/</link>
      <pubDate>Fri, 23 Jan 2015 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2015/01/23/%E4%BD%BF%E7%94%A8pyleus%E5%BC%80%E5%8F%91storm%E5%BA%94%E7%94%A8/</guid>
      <description>&lt;h3 id=&#34;storm&#34;&gt;Storm&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;什么是Storm(&lt;a href=&#34;https://storm.apache.org/&#34;&gt;https://storm.apache.org/&lt;/a&gt;)&#xA;解决的问题：实时数据分析&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;pyleus&#34;&gt;Pyleus&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;用Python写Storm topolopgy&#xA;Storm是在JVM平台上开发的，要使用非JVM平台语言（如Python，Go),需要使用ShellBolt，但是top仍然要使用Java定义&#xA;Pyleus是全部使用Python开发spout,bolt,top的一整套框架，可以完全不使用Java。&lt;/p&gt;&#xA;&lt;p&gt;Pyleus由Yelp开发&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;遇到的坑&#34;&gt;遇到的坑&lt;/h3&gt;&#xA;&lt;h4 id=&#34;定义muti-stream时的语法&#34;&gt;定义muti-stream时的语法&lt;/h4&gt;&#xA;&lt;p&gt;注意，当只有一个stream时，&lt;a href=&#34;http://yelp.github.io/pyleus/grouping.html#groupings&#34;&gt;文档&lt;/a&gt;中定义muti-stream的语法有有问题，运行提交topoplogy时会报错&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;Topology submission exception. (topology name=&#39;top_name&#39;) #&amp;lt;InvalidTopologyException InvalidTopologyException(msg:Component: [my_bolt] subscribes from non-existent stream:&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;MultipleBolt&lt;/span&gt;(Bolt):&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    OUTPUT_FIELDS &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;stream-id&amp;#34;&lt;/span&gt;: [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;value&amp;#34;&lt;/span&gt;],&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;stream-fake&amp;#34;&lt;/span&gt;: [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fake&amp;#34;&lt;/span&gt;], &lt;span style=&#34;color:#75715e&#34;&gt;##只有一个stream时，记得加个假的，不然会出错&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    <item>
      <title>Ubuntu 14.04 Emacs24问题汇总</title>
      <link>https://bopjiang.github.io/post/2015/01/20/ubuntu-14.04-emacs24%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/</link>
      <pubDate>Tue, 20 Jan 2015 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2015/01/20/ubuntu-14.04-emacs24%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/</guid>
      <description>&lt;p&gt;工作环境升级到Ubuntu14.04下，Emacs也升级到了24.3.1, 一些问题汇总如下：&lt;/p&gt;&#xA;&lt;h3 id=&#34;中文无法输入&#34;&gt;中文无法输入&lt;/h3&gt;&#xA;&lt;p&gt;我用的fcitx，只要做一件事情，确保启动Emacs的时候locale为中文,就可以在Emacs下输入中文&lt;/p&gt;&#xA;&lt;p&gt;Emacs图形界面启动使用的是emacs24-x, 先改名&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ sudo mv /usr/bin/emacs24-x /usr/bin/emacs24-x_behind&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后添加同名脚本文件:&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ echo /usr/bin/emacs24-x&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;LC_CTYPE&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;zh_CN.UTF-8&amp;#39;&lt;/span&gt; emacs24-x_behind&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;常用插件&#34;&gt;常用插件&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;插件管理&lt;/p&gt;&#xA;&lt;p&gt;默认用使ELPA，可以自己增加MELPA， 参考 &lt;a href=&#34;http://ergoemacs.org/emacs/emacs_package_system.html&#34;&gt;1&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;添加下述至~/.emacs开始，并重启emacs&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-lisp&#34; data-lang=&#34;lisp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(when (&lt;span style=&#34;color:#a6e22e&#34;&gt;&amp;gt;=&lt;/span&gt; emacs-major-version &lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  (&lt;span style=&#34;color:#a6e22e&#34;&gt;require&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;package&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  (package-initialize)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  (add-to-list &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;package-archives&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#39;&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;melpa&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;http://melpa.milkbox.net/packages/&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;t&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  )&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;运行list-package就能看到了&lt;/p&gt;&#xA;&lt;p&gt;下面插件，MELPA中都有&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;markdown-mode&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;yaml-mode&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>停止使用MS Word撰写技术文档</title>
      <link>https://bopjiang.github.io/post/2015/01/12/%E5%81%9C%E6%AD%A2%E4%BD%BF%E7%94%A8ms-word%E6%92%B0%E5%86%99%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/</link>
      <pubDate>Mon, 12 Jan 2015 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2015/01/12/%E5%81%9C%E6%AD%A2%E4%BD%BF%E7%94%A8ms-word%E6%92%B0%E5%86%99%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/</guid>
      <description>&lt;h4 id=&#34;技术文档特点&#34;&gt;技术文档特点&lt;/h4&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;多人参与撰写、维护&lt;/li&gt;&#xA;&lt;li&gt;保留时间长&lt;/li&gt;&#xA;&lt;li&gt;经常更改&lt;/li&gt;&#xA;&lt;li&gt;很多人长期需要阅读&lt;/li&gt;&#xA;&lt;li&gt;需要做检索&lt;/li&gt;&#xA;&lt;li&gt;历史修订记录&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;综合下来，对我们采用的技术提出以下要求&lt;/p&gt;&#xA;&lt;h4 id=&#34;基本要求&#34;&gt;基本要求&lt;/h4&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;轻量&lt;/li&gt;&#xA;&lt;li&gt;易更改&lt;/li&gt;&#xA;&lt;li&gt;易获取; 易传播,变更能及时的通知到其他所有人&lt;/li&gt;&#xA;&lt;li&gt;易检索&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h4 id=&#34;我们的文档管理软件栈&#34;&gt;我们的文档管理软件栈&lt;/h4&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Web服务器：Apache或Nginx&lt;/li&gt;&#xA;&lt;li&gt;WikiMedia：写文档&lt;/li&gt;&#xA;&lt;li&gt;Graphviz：写基本流程图&lt;/li&gt;&#xA;&lt;li&gt;PlantUML：写UML图&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;写文档，其他可能选择有Markdown, reStructuredText&lt;/p&gt;&#xA;&lt;h4 id=&#34;对比&#34;&gt;对比&lt;/h4&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;技术项&lt;/th&gt;&#xA;          &lt;th&gt;MS Word&lt;/th&gt;&#xA;          &lt;th&gt;Wiki（WikiMedia）&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;撰写难度&lt;/td&gt;&#xA;          &lt;td&gt;容易&lt;/td&gt;&#xA;          &lt;td&gt;有门槛&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;撰写&lt;/td&gt;&#xA;          &lt;td&gt;WYSIWYG(所见即所得)&lt;/td&gt;&#xA;          &lt;td&gt;WYTIWYG(所想即所得)&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;修改难度&lt;/td&gt;&#xA;          &lt;td&gt;好&lt;/td&gt;&#xA;          &lt;td&gt;好&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;归档保存&lt;/td&gt;&#xA;          &lt;td&gt;SVN, 邮件附件&lt;/td&gt;&#xA;          &lt;td&gt;WIKI网站，网址&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;修订历史&lt;/td&gt;&#xA;          &lt;td&gt;有&lt;/td&gt;&#xA;          &lt;td&gt;有&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;修改差异比较&lt;/td&gt;&#xA;          &lt;td&gt;SVN版本差异对比困难&lt;/td&gt;&#xA;          &lt;td&gt;方便，WIKI系统自带&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;检索查找&lt;/td&gt;&#xA;          &lt;td&gt;单文档查找（借助三方索引)&lt;/td&gt;&#xA;          &lt;td&gt;全文检索&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;权限控制&lt;/td&gt;&#xA;          &lt;td&gt;MS加密&lt;/td&gt;&#xA;          &lt;td&gt;账号/密码&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;格式&lt;/td&gt;&#xA;          &lt;td&gt;私有二进制,必须装有OFFICE&lt;/td&gt;&#xA;          &lt;td&gt;开放、文本、HTML,任何平台下浏览器都能打开&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;h4 id=&#34;使用mediawiki语法撰写文档&#34;&gt;使用MediaWiki语法撰写文档&lt;/h4&gt;&#xA;&lt;p&gt;常用的语法&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;标题、段落&lt;/li&gt;&#xA;&lt;li&gt;列表&lt;/li&gt;&#xA;&lt;li&gt;链接&lt;/li&gt;&#xA;&lt;li&gt;表格&lt;/li&gt;&#xA;&lt;li&gt;图&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;方法一：直接使用二进制的图&lt;/p&gt;&#xA;&lt;p&gt;画图：PowerPoint、Visio、白板+水笔+相机&lt;/p&gt;&#xA;&lt;p&gt;上传图片到WIKI-&amp;gt; 生成链接 -&amp;gt; 文档中嵌入链接&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;方法二（推荐）：把图写出来&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;流程图：graphviz&#xA;使用graphviz 的dot语法&lt;/li&gt;&#xA;&lt;li&gt;UML图： PlantUML&#xA;使用PlantUML语法&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h4 id=&#34;参考&#34;&gt;参考&lt;/h4&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;http://www.wikimedia.org/&#34;&gt;WikiMedia&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;http://www.graphviz.org/&#34;&gt;Graphviz&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;http://www.plantuml.com/&#34;&gt;PlantUML&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;很多同学问为什么要学习这么多语言，参看&lt;a href=&#34;http://book.douban.com/subject/21964984/&#34;&gt;Domain-Specific Languages 领域特定语言&lt;/a&gt;,by Martin Fowler&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>Unix哲学</title>
      <link>https://bopjiang.github.io/post/2015/01/02/unix%E5%93%B2%E5%AD%A6/</link>
      <pubDate>Fri, 02 Jan 2015 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2015/01/02/unix%E5%93%B2%E5%AD%A6/</guid>
      <description>&lt;p&gt;所谓道的东西，大概只能参悟，不是言语能表达的。&lt;/p&gt;&#xA;&lt;p&gt;下面几篇文章,值得细细品味。&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;a href=&#34;http://book.douban.com/subject/5387401/&#34;&gt;Unix编程艺术&lt;/a&gt;，最后一章&lt;a href=&#34;http://i.linuxtoy.org/docs/guide/ch12.html&#34;&gt;《无根的根：无名师的 Unix 心传》&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;似乎用隐喻，很多道理能讲的更透彻。&lt;/p&gt;&#xA;&lt;p&gt;这本书的&lt;a href=&#34;http://www.faqs.org/docs/artu/&#34; title=&#34;The Art of Unix Programming&#34;&gt;英文版本&lt;/a&gt;是公开的，值得一看。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;a href=&#34;http://coder.link-pub.cn/2012/09/14/UNIX-Hater.html&#34; title=&#34;uinx hater&#34;&gt;UNIX痛恨者手册&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;英文原版：&lt;a href=&#34;http://web.mit.edu/~simsong/www/ugh.pdf&#34;&gt;The UNIX-HATERS Handbook&lt;/a&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;a href=&#34;http://book.douban.com/subject/7564417/&#34;&gt;Linux/Unix设计思想&lt;/a&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>ssh一系列问题汇总</title>
      <link>https://bopjiang.github.io/post/2014/12/23/ssh%E4%B8%80%E7%B3%BB%E5%88%97%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/</link>
      <pubDate>Tue, 23 Dec 2014 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2014/12/23/ssh%E4%B8%80%E7%B3%BB%E5%88%97%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/</guid>
      <description>&lt;h4 id=&#34;ssh登录慢&#34;&gt;ssh登录慢&lt;/h4&gt;&#xA;&lt;p&gt;解决方案：关闭GSS认证&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;jj@sysadmin ~&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;$ cat ~/.ssh/config &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ServerAliveInterval &lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;GSSAPIAuthentication no&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;配置密钥登录&#34;&gt;配置密钥登录&lt;/h4&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;生成密钥&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ ssh-keygen  -t rsa -C &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;your_email@youremail.com&amp;#34;&lt;/span&gt; &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;复制本地的公钥， 追加到远端的$HOME/.ssh/authorized_keys文件&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;必须保证要远端$HOME目录下:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;.ssh目录的权限必须是700&lt;/li&gt;&#xA;&lt;li&gt;.ssh/authorized_keys文件权限必须是600&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>使用docker安装storm集群</title>
      <link>https://bopjiang.github.io/post/2014/12/22/%E4%BD%BF%E7%94%A8docker%E5%AE%89%E8%A3%85storm%E9%9B%86%E7%BE%A4/</link>
      <pubDate>Mon, 22 Dec 2014 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2014/12/22/%E4%BD%BF%E7%94%A8docker%E5%AE%89%E8%A3%85storm%E9%9B%86%E7%BE%A4/</guid>
      <description>&lt;h4 id=&#34;基础&#34;&gt;基础&lt;/h4&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://storm.apache.org/&#34;&gt;storm&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://github.com/wurstmeister/storm-docker&#34;&gt;storm-docker&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://www.docker.com/&#34;&gt;docker&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;http://www.fig.sh/&#34;&gt;fig&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;pip, python&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h4 id=&#34;步骤&#34;&gt;步骤&lt;/h4&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;升级内核&lt;/p&gt;&#xA;&lt;p&gt;由于是CentOS 6.3环境，内核不满足版本要求。升级内核版本至3.10.63&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;In general, a 3.8 Linux kernel is the minimum requirement for Docker, as some of the prior versions have known issues that are triggered by Docker. Linux kernel versions older than 3.8 are known to cause kernel panics and to break Docker.&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;The latest minor version (3.x.y) of the 3.10 (or a newer maintained version) Linux kernel is recommended. Keeping the kernel up to date with the latest minor version will ensure critical kernel bugs get fixed.&lt;/p&gt;</description>
    </item>
    <item>
      <title>为什么要写blog</title>
      <link>https://bopjiang.github.io/post/2014/12/21/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%86%99blog/</link>
      <pubDate>Sun, 21 Dec 2014 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2014/12/21/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%86%99blog/</guid>
      <description>&lt;p&gt;为什么要写博客,我认为有以下几个理由：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;培养坚持做一件事情的毅力。&lt;/p&gt;&#xA;&lt;p&gt;自从上半年开始写blog以来，发现坚持实在太难了，中间有半年的时间都没有写任何东西。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;习惯性的整理自己的思考的东西，让它更有系统性&lt;/p&gt;&#xA;&lt;p&gt;很多想法唯有从大脑写出来，才能更加准确。很多逻辑漏洞，转换为书面的过程中会更容易被发现。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;提高写作表述能力&lt;/p&gt;&#xA;&lt;p&gt;除了PPT，EXCEL表格，邮件，技术方案、规格等八股文外，基本上很少有机会写文章了。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;增加自己的影响力和朋友圈。&lt;/p&gt;&#xA;&lt;p&gt;这个暂时还没有。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;网上其他人的见解:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;a href=&#34;http://nathanmarz.com/blog/you-should-blog-even-if-you-have-no-readers.html&#34;&gt;You should blog even if you have no readers&lt;/a&gt;， by &lt;a href=&#34;https://github.com/nathanmarz&#34;&gt;Nathan Marz&lt;/a&gt;, Storm系统的作者。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;上文中译: &lt;a href=&#34;http://blog.jobbole.com/38258/&#34;&gt;即便没有读者，你也要写博客&lt;/a&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;a href=&#34;http://www.ruanyifeng.com/blog/2006/12/why_i_keep_blogging.html&#34;&gt;为什么要写Blog？&lt;/a&gt;, by 阮一峰&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;国内一直关注的几个博客：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;a href=&#34;http://blog.codingnow.com/&#34;&gt;云风的BLOG&lt;/a&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;a href=&#34;http://www.ruanyifeng.com/blog/&#34;&gt;阮一峰&lt;/a&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>自己动手做个机顶盒</title>
      <link>https://bopjiang.github.io/post/2014/12/07/%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E5%81%9A%E4%B8%AA%E6%9C%BA%E9%A1%B6%E7%9B%92/</link>
      <pubDate>Sun, 07 Dec 2014 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2014/12/07/%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E5%81%9A%E4%B8%AA%E6%9C%BA%E9%A1%B6%E7%9B%92/</guid>
      <description>&lt;p&gt;不知N年后，还有人知道&lt;a href=&#34;http://en.wikipedia.org/wiki/Set-top_box&#34;&gt;机顶盒&lt;/a&gt;是啥东西不。&lt;/p&gt;&#xA;&lt;h3 id=&#34;基础知识&#34;&gt;基础知识&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;http://www.raspberrypi.org/&#34;&gt;Respberry Pi&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;www.xbmc.org/&#34;&gt;XBMC&lt;/a&gt;，现在改名叫&lt;a href=&#34;http://kodi.tv/&#34;&gt;Kodi&lt;/a&gt;了&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://github.com/taxigps/xbmc-addons-chinese&#34;&gt;xbmc-addons-chinese&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://code.google.com/p/android-xbmcremote/&#34;&gt;XBMC Remote for Android&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;硬件准备&#34;&gt;硬件准备&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Respberry Pi一个， 淘宝200-300元间&lt;/li&gt;&#xA;&lt;li&gt;SD卡（2G或4G），装系统和软件用&lt;/li&gt;&#xA;&lt;li&gt;网线一根（我的Pi只有LAN口， 没有装WIFI模块）&lt;/li&gt;&#xA;&lt;li&gt;5V micro USB电源一个(Android手机的充电器就可以用)&lt;/li&gt;&#xA;&lt;li&gt;Android手机一个（旧的也行，反正HTC G1能用）&lt;/li&gt;&#xA;&lt;li&gt;HDMI线一根(老电视没有HDMI接口，需要三色AV线1根，3.5mm一分二音频线公头转双母头1根，AV解析度只能到720×480i）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;软件准备&#34;&gt;软件准备&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;RASPBMC：raspberrypi网站上已经做好预装XBMC的镜像，直接用就可以&lt;/li&gt;&#xA;&lt;li&gt;ssh客户端（最好Linux系统）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;过程&#34;&gt;过程&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;在SD卡上做好系统&lt;/li&gt;&#xA;&lt;li&gt;修改配置文件，设置http控制端口(有raspi-config的脚本可以用)&lt;/li&gt;&#xA;&lt;li&gt;手机端安装遥控程序(XBMC Remote), 使用配置的HTTP端口&lt;/li&gt;&#xA;&lt;li&gt;安装中文插件xbmc-addons-chinese&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;遇到问题&#34;&gt;遇到问题&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;安装插件后下载不到节目列表&#xA;&lt;ul&gt;&#xA;&lt;li&gt;设置HTTP代理&lt;/li&gt;&#xA;&lt;li&gt;重启Pi&lt;/li&gt;&#xA;&lt;li&gt;打开debug，查看错误日志，一般都是网络访问不了&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;网络代理配置改后未生效，GUI上也看不到&#xA;&lt;ul&gt;&#xA;&lt;li&gt;暂未解决&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>Measure, Statsd and Graphite</title>
      <link>https://bopjiang.github.io/post/2014/12/03/measure-statsd-and-graphite/</link>
      <pubDate>Wed, 03 Dec 2014 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2014/12/03/measure-statsd-and-graphite/</guid>
      <description>&lt;p&gt;今天给UXIN内部做了graphite的分享，PPT也是网上资料拼凑的，分享下: &lt;a href=&#34;http://pan.baidu.com/s/1dDfBYaH&#34;&gt;Measure, Statsd and Graphite&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>使用graphite做指标统计和绘图</title>
      <link>https://bopjiang.github.io/post/2014/12/01/%E4%BD%BF%E7%94%A8graphite%E5%81%9A%E6%8C%87%E6%A0%87%E7%BB%9F%E8%AE%A1%E5%92%8C%E7%BB%98%E5%9B%BE/</link>
      <pubDate>Mon, 01 Dec 2014 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2014/12/01/%E4%BD%BF%E7%94%A8graphite%E5%81%9A%E6%8C%87%E6%A0%87%E7%BB%9F%E8%AE%A1%E5%92%8C%E7%BB%98%E5%9B%BE/</guid>
      <description>&lt;h3 id=&#34;基础知识&#34;&gt;基础知识&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://graphite.readthedocs.org/en/latest/&#34;&gt;https://graphite.readthedocs.org/en/latest/&lt;/a&gt;  graphite doc&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;http://graphite.wikidot.com/&#34;&gt;http://graphite.wikidot.com/&lt;/a&gt;  outdated&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;http://graphite.wikidot.com/high-level-diagram&#34;&gt;http://graphite.wikidot.com/high-level-diagram&lt;/a&gt;  high-level-diagram(outdated)&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;http://www.aosabook.org/en/graphite.html&#34;&gt;http://www.aosabook.org/en/graphite.html&lt;/a&gt; The Architecture of Open Source Applications&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;代码库&#34;&gt;代码库&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://github.com/graphite-project&#34;&gt;https://github.com/graphite-project&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://github.com/bitly/statsdaemon&#34;&gt;https://github.com/bitly/statsdaemon&lt;/a&gt; statsd implemented in Go&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;使用graphite的项目&#34;&gt;使用graphite的项目&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;League Of Legends  &lt;a href=&#34;http://highscalability.com/blog/2014/10/13/how-league-of-legends-scaled-chat-to-70-million-players-it-t.html&#34;&gt;http://highscalability.com/blog/2014/10/13/how-league-of-legends-scaled-chat-to-70-million-players-it-t.html&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;hipchat &lt;a href=&#34;http://highscalability.com/blog/2014/1/6/how-hipchat-stores-and-indexes-billions-of-messages-using-el.html&#34;&gt;http://highscalability.com/blog/2014/1/6/how-hipchat-stores-and-indexes-billions-of-messages-using-el.html&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;其他资料&#34;&gt;其他资料&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Measure it, Don&amp;rsquo;t Just Monitor It &lt;a href=&#34;http://bryanwb.github.io/monitoring-measurement-preso&#34;&gt;http://bryanwb.github.io/monitoring-measurement-preso&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;A quick look at Graphite and StatsD&lt;a href=&#34;http://www.slideshare.net/adrianmoisey1/graphite-14761751&#34;&gt;http://www.slideshare.net/adrianmoisey1/graphite-14761751&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>使用jekyll-bootstrap和github建立个人博客</title>
      <link>https://bopjiang.github.io/post/2014/11/30/%E4%BD%BF%E7%94%A8jekyll-bootstrap%E5%92%8Cgithub%E5%BB%BA%E7%AB%8B%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</link>
      <pubDate>Sun, 30 Nov 2014 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2014/11/30/%E4%BD%BF%E7%94%A8jekyll-bootstrap%E5%92%8Cgithub%E5%BB%BA%E7%AB%8B%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</guid>
      <description>&lt;p&gt;注意：仅在Ubuntu 14.04环境下测试过。&lt;/p&gt;&#xA;&lt;h3 id=&#34;安装jekyll-bootstrap&#34;&gt;安装jekyll-bootstrap&lt;/h3&gt;&#xA;&lt;p&gt;&lt;a href=&#34;http://www.ithans.com/blog/2013/02/18/jekyll-bootstrap-install/&#34;&gt;http://www.ithans.com/blog/2013/02/18/jekyll-bootstrap-install/&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h3 id=&#34;本地测试环境&#34;&gt;本地测试环境&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;jekyll b          &lt;span style=&#34;color:#75715e&#34;&gt;## 编译&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;jekyll s --watch  &lt;span style=&#34;color:#75715e&#34;&gt;## 运行服务（有变动时实时编译）&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;出错处理&#34;&gt;出错处理&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;jekyll serve启动服务的时候报错：&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/var/lib/gems/1.9.1/gems/execjs-1.4.0/lib/execjs/runtimes.rb:51:in &lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;autodetect&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;: Could not find a JavaScript runtime.&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;See https://github.com/sstephenson/execjs &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; a list of available runtimes. &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;ExecJS::RuntimeUnavailable&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;原因: 没有js运行时环境&lt;/li&gt;&#xA;&lt;li&gt;解决办法: 安装js运行时环境&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo apt-get install nodejs&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;2&#34;&gt;&#xA;&lt;li&gt;错误&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ERROR:  Could not find a valid gem &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;jekyll&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&amp;gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; 0&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; in any repository&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ERROR:  Possible alternatives: jekyll&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;原因: 国内网络的原因。&lt;/li&gt;&#xA;&lt;li&gt;解决办法: 只用taobao源&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;gem sources --remove http://rubygems.org/&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;gem sources -a http://ruby.taobao.org/&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;gem sources -l &lt;span style=&#34;color:#75715e&#34;&gt;## 确保只有taobao源&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo gem install rack&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo gem install jekyll&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;参考: &lt;a href=&#34;http://blog.ownlinux.net/2012/08/fix-gem-install-jekyll-problem.html&#34;&gt;http://blog.ownlinux.net/2012/08/fix-gem-install-jekyll-problem.html&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>使用emacs进行golang编程</title>
      <link>https://bopjiang.github.io/post/2014/04/21/%E4%BD%BF%E7%94%A8emacs%E8%BF%9B%E8%A1%8Cgolang%E7%BC%96%E7%A8%8B/</link>
      <pubDate>Mon, 21 Apr 2014 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2014/04/21/%E4%BD%BF%E7%94%A8emacs%E8%BF%9B%E8%A1%8Cgolang%E7%BC%96%E7%A8%8B/</guid>
      <description>&lt;h3 id=&#34;环境&#34;&gt;环境&lt;/h3&gt;&#xA;&lt;p&gt;Ubuntu 12.04， Emacs 23, 中文输入法fcitx&lt;/p&gt;&#xA;&lt;h3 id=&#34;emacs配置&#34;&gt;Emacs配置&lt;/h3&gt;&#xA;&lt;p&gt;使用el-get管理Emacs插件甚是方便，具体见[1]&lt;/p&gt;&#xA;&lt;p&gt;Emacs需要安装的插件&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;el-get （下面的emacs插件都使用el-get-install安装）&lt;/li&gt;&#xA;&lt;li&gt;cscope (安装前要在系统安装cscope)&lt;/li&gt;&#xA;&lt;li&gt;go-mode&lt;/li&gt;&#xA;&lt;li&gt;ibus&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;中文输入法问题&#34;&gt;中文输入法问题&lt;/h3&gt;&#xA;&lt;p&gt;除了安装ibus，下面两个要注意：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;apt-get安装python-xlib插件&lt;/li&gt;&#xA;&lt;li&gt;快捷键冲突：&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;建立代码索引&#34;&gt;建立代码索引&lt;/h3&gt;&#xA;&lt;p&gt;用下面的脚本：&lt;/p&gt;&#xA;&lt;script src=&#34;https://gist.github.com/bopjiang/11146574.js&#34;&gt;&lt;/script&gt;&#xA;&lt;h3 id=&#34;参考&#34;&gt;参考&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;a href=&#34;http://www.cnblogs.com/A-Song/archive/2013/03/09/2951951.html&#34;&gt;http://www.cnblogs.com/A-Song/archive/2013/03/09/2951951.html&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;http://www.ibm.com/developerworks/cn/aix/library/au-sudo/index.html&#34;&gt;http://www.ibm.com/developerworks/cn/aix/library/au-sudo/index.html&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;</description>
    </item>
    <item>
      <title>go常用工具</title>
      <link>https://bopjiang.github.io/post/2014/04/18/go%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/</link>
      <pubDate>Fri, 18 Apr 2014 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2014/04/18/go%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/</guid>
      <description>&lt;p&gt;项目正式使用go语言，到现在已经有半年多了。有几个工具共享下：&lt;/p&gt;&#xA;&lt;h3 id=&#34;godep&#34;&gt;godep&lt;/h3&gt;&#xA;&lt;p&gt;依赖管理&#xA;godep get install&lt;/p&gt;&#xA;&lt;h3 id=&#34;godef&#34;&gt;godef&lt;/h3&gt;&#xA;&lt;h3 id=&#34;日志模块seelog&#34;&gt;日志模块seelog&lt;/h3&gt;&#xA;&lt;p&gt;日志量大的时候，日志产生的几个参数需要调整，不然日志时间偏差较大&lt;/p&gt;&#xA;&lt;h3 id=&#34;使用go的开源项目&#34;&gt;使用Go的开源项目&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;a href=&#34;http://github.com/bitly/nsq&#34;&gt;nsq&lt;/a&gt;, 一个分布式的消息队列&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;http://www.docker.io&#34;&gt;docker&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://github.com/coreos/etcd&#34;&gt;etcd&lt;/a&gt;, 配置服务，类似Zookeeper和doozer。是&lt;a href=&#34;https://coreos.com/&#34;&gt;CoreOS&lt;/a&gt;的核心组件。&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;http://influxdb.com/&#34;&gt;influxdb&lt;/a&gt;, 一个时间序列（TSDB, time series database）数据库, 类似&lt;a href=&#34;https://bopjiang.github.io/blog/2014/12/01/graphing-in-graphite/&#34;&gt;graphite&lt;/a&gt;项目&lt;/li&gt;&#xA;&lt;/ol&gt;</description>
    </item>
    <item>
      <title>sudo 环境变量继承</title>
      <link>https://bopjiang.github.io/post/2014/04/01/sudo-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E7%BB%A7%E6%89%BF/</link>
      <pubDate>Tue, 01 Apr 2014 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2014/04/01/sudo-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E7%BB%A7%E6%89%BF/</guid>
      <description>&lt;p&gt;修改sudo的配置文件：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo visudo&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;将Defaults env_reset改成Defaults !env_reset,取消掉对PATH变量的重置。&lt;br/&gt;&lt;/p&gt;&#xA;&lt;p&gt;然后在.bashrc中最后添加&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;alias sudo&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;sudo env PATH=$PATH&amp;#39;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这样sudo执行命令时所搜寻的路径就是系统的PATH变量中的路径，如想添加其他变量也是类似。&lt;/p&gt;&#xA;&lt;h4 id=&#34;参考&#34;&gt;参考&lt;/h4&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;a href=&#34;http://www.cnblogs.com/A-Song/archive/2013/03/09/2951951.html&#34;&gt;http://www.cnblogs.com/A-Song/archive/2013/03/09/2951951.html&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;http://www.ibm.com/developerworks/cn/aix/library/au-sudo/index.html&#34;&gt;http://www.ibm.com/developerworks/cn/aix/library/au-sudo/index.html&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;</description>
    </item>
    <item>
      <title>NAT配置</title>
      <link>https://bopjiang.github.io/post/2014/03/27/nat%E9%85%8D%E7%BD%AE/</link>
      <pubDate>Thu, 27 Mar 2014 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2014/03/27/nat%E9%85%8D%E7%BD%AE/</guid>
      <description>&lt;p&gt;时隔10年，又搞了一回NAT配置，兼顾学习了下路由表知识。&lt;/p&gt;&#xA;&lt;h4 id=&#34;起因&#34;&gt;起因&lt;/h4&gt;&#xA;&lt;p&gt;分析某个移动APP的包协议&lt;/p&gt;&#xA;&lt;h4 id=&#34;预备知识&#34;&gt;预备知识&lt;/h4&gt;&#xA;&lt;p&gt;&lt;a href=&#34;http://www.rfc-editor.org/rfc/rfc3022.txt&#34;&gt;http://www.rfc-editor.org/rfc/rfc3022.txt&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h4 id=&#34;网络拓扑图&#34;&gt;网络拓扑图&lt;/h4&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       internet&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;         WIFI                  * &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          |                    *&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          | wlan0              *                                        &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   +-----------------+ eth0    *    WAN +-----------------+&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   |  Test PC (NAT)  |------------------|  TP-Link Router |--- WIFI&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   +-----------------+         *        +-----------------+     |&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                               *                                | &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                               *                                |&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                               *                                |&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&#x9;&#x9;&#x9;              +-----------------+&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;      |  Android Phone  |&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                                                      +-----------------+&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;ip配置&#34;&gt;IP配置&lt;/h4&gt;&#xA;&lt;h6 id=&#34;test-pc&#34;&gt;Test PC&lt;/h6&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;wlan: 172.16.13.163/16&lt;/li&gt;&#xA;&lt;li&gt;gateway: 172.16.13.1&lt;/li&gt;&#xA;&lt;li&gt;eth0: 192.168.2.1/24&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h6 id=&#34;tp-link-router&#34;&gt;TP-Link Router&lt;/h6&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;WAN: 192.168.2.2/24&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h4 id=&#34;路由配置&#34;&gt;路由配置&lt;/h4&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;root@hp4400:~# route -n&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Kernel IP routing table&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Destination     Gateway         Genmask         Flags Metric Ref    Use Iface&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;0.0.0.0         172.16.13.163   0.0.0.0         UG    &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;      &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; eth0&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;169.254.0.0     0.0.0.0         255.255.0.0     U     &lt;span style=&#34;color:#ae81ff&#34;&gt;1000&lt;/span&gt;   &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; wlan0&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;172.16.0.0      0.0.0.0         255.255.0.0     U     &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;      &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; wlan0&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;172.16.13.163   0.0.0.0         255.255.255.255 UH    &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;      &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; eth0&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;192.168.2.0     0.0.0.0         255.255.255.0   U     &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;      &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;        &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; eth0&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;连接好网络后，Test PC反而不能上网。修改路由后才可以&lt;/p&gt;</description>
    </item>
    <item>
      <title>Linux与Windows间相互远程访问</title>
      <link>https://bopjiang.github.io/post/2014/03/26/linux%E4%B8%8Ewindows%E9%97%B4%E7%9B%B8%E4%BA%92%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE/</link>
      <pubDate>Wed, 26 Mar 2014 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2014/03/26/linux%E4%B8%8Ewindows%E9%97%B4%E7%9B%B8%E4%BA%92%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE/</guid>
      <description>&lt;h2 id=&#34;windows访问linux&#34;&gt;windows访问linux&lt;/h2&gt;&#xA;&lt;h4 id=&#34;ssh访问&#34;&gt;ssh访问&lt;/h4&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;putty&lt;/li&gt;&#xA;&lt;li&gt;xshell&lt;/li&gt;&#xA;&lt;li&gt;SecureCRT&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h4 id=&#34;图形界面&#34;&gt;图形界面&lt;/h4&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;TightVNC&#xA;（linux上面要装vncserver）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;linux访问windows桌面&#34;&gt;linux访问windows桌面&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;remmina, The GTK+ Remote Desktop Client&lt;/li&gt;&#xA;&lt;li&gt;rdesktop&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rdesktop -a &lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt; 172.16.13.88:3389 -u jiangjia -g 1024*768 &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;windows远程后，图形界面的关机按钮消失了，要关机必须命令行：&lt;/p&gt;&#xA;&lt;p&gt;关机(等待一分钟): shutdown -s&lt;/p&gt;&#xA;&lt;p&gt;重启: shutdown -r&lt;/p&gt;&#xA;&lt;p&gt;30s后关机: shutdown -s -t 30&lt;/p&gt;&#xA;&lt;p&gt;中止关机操作: shutdown – a&lt;/p&gt;&#xA;&lt;h2 id=&#34;遗留问题&#34;&gt;遗留问题&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;remmina 远程没有声音问题&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>深圳百公里徒步活动</title>
      <link>https://bopjiang.github.io/post/2014/03/22/%E6%B7%B1%E5%9C%B3%E7%99%BE%E5%85%AC%E9%87%8C%E5%BE%92%E6%AD%A5%E6%B4%BB%E5%8A%A8/</link>
      <pubDate>Sat, 22 Mar 2014 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2014/03/22/%E6%B7%B1%E5%9C%B3%E7%99%BE%E5%85%AC%E9%87%8C%E5%BE%92%E6%AD%A5%E6%B4%BB%E5%8A%A8/</guid>
      <description>&lt;p&gt;第二次了。去年一起走的人多一些，今年好几位同学（jimmy，小周，阿卓）都没参加，只有四个人组队了，不过还是蛮开心的。&lt;/p&gt;&#xA;&lt;h2 id=&#34;参加人员&#34;&gt;参加人员&lt;/h2&gt;&#xA;&lt;hr&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;jj&lt;/li&gt;&#xA;&lt;li&gt;龚博&lt;/li&gt;&#xA;&lt;li&gt;jiangmin&lt;/li&gt;&#xA;&lt;li&gt;jiangmin同学小青&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;路线&#34;&gt;路线&lt;/h2&gt;&#xA;&lt;hr&gt;&#xA;&lt;p&gt;科技园-深圳湾红树林-滨海大道-中心公园Ａ区南门&#xA;（没开手机的GPS, 本来想手绘个路线图的，openstreetmap还不熟）&lt;br&gt;&#xA;&lt;a href=&#34;https://www.openstreetmap.org/&#34;&gt;https://www.openstreetmap.org/&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;路上人实在太多了，都走不开。出红树林后脱离了大部队，跟几个驴友沿着滨海大道行进，钻过桥洞无数，最终还是在中心公园同大部队汇合了。&lt;/p&gt;&#xA;&lt;h2 id=&#34;时间&#34;&gt;时间&lt;/h2&gt;&#xA;&lt;hr&gt;&#xA;&lt;p&gt;19:00 - 23:00&#xA;约20KM&lt;/p&gt;</description>
    </item>
    <item>
      <title>Python UDP客户端</title>
      <link>https://bopjiang.github.io/post/2014/03/21/python-udp%E5%AE%A2%E6%88%B7%E7%AB%AF/</link>
      <pubDate>Fri, 21 Mar 2014 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2014/03/21/python-udp%E5%AE%A2%E6%88%B7%E7%AB%AF/</guid>
      <description>&lt;p&gt;第一次写UDP程序，超乎寻常的简单&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; socket&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; s &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; socket&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;socket(socket&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;AF_INET,socket&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;SOCK_DGRAM)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; time&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; s&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;sendto(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;test&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;%s&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;%&lt;/span&gt; time&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;strftime(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%Y-%m-&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;%d&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;_%H-%M-%S&amp;#34;&lt;/span&gt;), (&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;172.16.12.28&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;7301&lt;/span&gt;))&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;23&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; s&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;recvfrom(&lt;span style=&#34;color:#ae81ff&#34;&gt;1024&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;test2014-03-21_08-35-57&amp;#39;&lt;/span&gt;, (&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;172.16.12.28&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;7301&lt;/span&gt;))&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    <item>
      <title>分配给中国的IP有多少个</title>
      <link>https://bopjiang.github.io/post/2014/03/20/%E5%88%86%E9%85%8D%E7%BB%99%E4%B8%AD%E5%9B%BD%E7%9A%84ip%E6%9C%89%E5%A4%9A%E5%B0%91%E4%B8%AA/</link>
      <pubDate>Thu, 20 Mar 2014 00:00:00 +0000</pubDate>
      <guid>https://bopjiang.github.io/post/2014/03/20/%E5%88%86%E9%85%8D%E7%BB%99%E4%B8%AD%E5%9B%BD%E7%9A%84ip%E6%9C%89%E5%A4%9A%E5%B0%91%E4%B8%AA/</guid>
      <description>&lt;h2 id=&#34;获取全球ip地址分配列表&#34;&gt;获取全球IP地址分配列表&lt;/h2&gt;&#xA;&lt;hr&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl http://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latest -o iplist.txt&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;统计&#34;&gt;统计&lt;/h2&gt;&#xA;&lt;hr&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;jiangjia@houtaiceshi1 ipaddr&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;$ cat  iplist.txt  |grep ipv4 |grep &lt;span style=&#34;color:#ae81ff&#34;&gt;\|&lt;/span&gt;CN&lt;span style=&#34;color:#ae81ff&#34;&gt;\|&lt;/span&gt; | cut -d &lt;span style=&#34;color:#ae81ff&#34;&gt;\|&lt;/span&gt; -f &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt; | awk &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;// {sum += $1};END {print sum}&amp;#39;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;330410496&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;IP v4才3.3亿，难怪深圳联通ADSL宽带分配给我是个私网IP了，合同到期坚决换掉。&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
